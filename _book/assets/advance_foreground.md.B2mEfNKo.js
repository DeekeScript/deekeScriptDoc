import{_ as p,c as i,o as l,j as s,ag as n,a as e}from"./chunks/framework.S-Qvb3wi.js";const m=JSON.parse('{"title":"前台服务","description":"DeekeScript - 前台服务","frontmatter":{"title":"前台服务","description":"DeekeScript - 前台服务"},"headers":[],"relativePath":"advance/foreground.md","filePath":"advance/foreground.md"}'),r={name:"advance/foreground.md"};function t(c,a,o,d,u,b){return l(),i("div",null,a[0]||(a[0]=[s("h1",{id:"前台服务",tabindex:"-1"},[e("前台服务 "),s("a",{class:"header-anchor",href:"#前台服务","aria-label":'Permalink to "前台服务"'},"​")],-1),s("p",null,"如果你需要后台常驻任务，可以使用前台服务",-1),s("h2",{id:"startservice",tabindex:"-1"},[e("startService() "),s("a",{class:"header-anchor",href:"#startservice","aria-label":'Permalink to "startService()"'},"​")],-1),s("blockquote",null,[s("p",{void:""},"返回")],-1),n(`<p>启动前台服务</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ForegroundServiceBridge.setContent(&#39;测试&#39;, &#39;前台服务&#39;);</span></span>
<span class="line"><span>ForegroundServiceBridge.startService();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="setcontenttitlecontent" tabindex="-1">setContent(title, content) <a class="header-anchor" href="#setcontenttitlecontent" aria-label="Permalink to &quot;setContent(title, content)&quot;">​</a></h2>`,3),s("blockquote",null,[s("p",{void:""},"返回")],-1),n(`<p>设置前台服务的标题和描述</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ForegroundServiceBridge.setContent(&#39;测试&#39;, &#39;前台服务&#39;);</span></span>
<span class="line"><span>ForegroundServiceBridge.startService();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="registerfunc" tabindex="-1">register(func) <a class="header-anchor" href="#registerfunc" aria-label="Permalink to &quot;register(func)&quot;">​</a></h2>`,3),s("blockquote",null,[s("p",null,"func 需要执行的方法"),s("p",{void:""},"返回")],-1),n(`<p>前台服务执行的任务（注意，需要在服务启动前执行）</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>let close = false;</span></span>
<span class="line"><span>ForegroundServiceBridge.setContent(&#39;测试&#39;, &#39;前台服务&#39;);</span></span>
<span class="line"><span>ForegroundServiceBridge.register(()=&gt;{</span></span>
<span class="line"><span>    console.log(&#39;前台服务启动成功&#39;);</span></span>
<span class="line"><span>    let m = setInterval(() =&gt; {</span></span>
<span class="line"><span>        console.log(&#39;正在执行任务...&#39;);</span></span>
<span class="line"><span>        if(close){</span></span>
<span class="line"><span>            clearInterval(m);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }, 3000);</span></span>
<span class="line"><span>});</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ForegroundServiceBridge.startService();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>let i = 0;</span></span>
<span class="line"><span>setInterval(() =&gt; {</span></span>
<span class="line"><span>    console.log(&#39;正在监听中...&#39;);</span></span>
<span class="line"><span>    if(i++ &gt;= 1){</span></span>
<span class="line"><span>        ForegroundServiceBridge.stopService();</span></span>
<span class="line"><span>        close = true;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}, 10000);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="stopservice" tabindex="-1">stopService() <a class="header-anchor" href="#stopservice" aria-label="Permalink to &quot;stopService()&quot;">​</a></h2>`,3),s("blockquote",null,[s("p",{void:""},"返回")],-1),n('<p>停止服务</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NotificationBridge.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stopService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>',2)]))}const v=p(r,[["render",t]]);export{m as __pageData,v as default};
